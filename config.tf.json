{
  "data": {
    "digitalocean_ssh_key": {
      "default": {
        "name": "default"
      }
    }
  },
  "output": {
    "droplet_ip": {
      "description": "The public IPv4 address of the Droplet",
      "value": "${digitalocean_droplet.digitalocean-nix-tf.ipv4_address}"
    }
  },
  "provider": {
    "digitalocean": {}
  },
  "resource": {
    "digitalocean_custom_image": {
      "nixos": {
        "name": "middle-relay",
        "regions": [
          "sgp1"
        ],
        "url": "https://github.com/akazdayo/digitalocean-nix-tf/releases/download/latest/nixos-digitalocean-do.qcow2.gz"
      }
    },
    "digitalocean_droplet": {
      "digitalocean-nix-tf": {
        "image": "${digitalocean_custom_image.nixos.id}",
        "name": "digitalocean-nix-tf",
        "region": "sgp1",
        "size": "s-1vcpu-1gb",
        "ssh_keys": [
          "${data.digitalocean_ssh_key.default.id}"
        ]
      }
    },
    "digitalocean_firewall": {
      "tor-relay": {
        "droplet_ids": [
          "${digitalocean_droplet.digitalocean-nix-tf.id}"
        ],
        "inbound_rule": [
          {
            "port_range": "22",
            "protocol": "tcp",
            "source_addresses": [
              "0.0.0.0/0",
              "::/0"
            ]
          },
          {
            "port_range": "9001",
            "protocol": "tcp",
            "source_addresses": [
              "0.0.0.0/0",
              "::/0"
            ]
          },
          {
            "protocol": "icmp",
            "source_addresses": [
              "0.0.0.0/0",
              "::/0"
            ]
          }
        ],
        "name": "tor-relay-firewall",
        "outbound_rule": [
          {
            "destination_addresses": [
              "0.0.0.0/0",
              "::/0"
            ],
            "port_range": "1-65535",
            "protocol": "tcp"
          },
          {
            "destination_addresses": [
              "0.0.0.0/0",
              "::/0"
            ],
            "port_range": "1-65535",
            "protocol": "udp"
          },
          {
            "destination_addresses": [
              "0.0.0.0/0",
              "::/0"
            ],
            "protocol": "icmp"
          }
        ]
      }
    }
  },
  "terraform": {
    "required_providers": {
      "digitalocean": {
        "source": "digitalocean/digitalocean",
        "version": "~> 2.75"
      }
    }
  }
}
